# Migration `20200404141547-add-rating-table`

This migration has been generated by iqpc.mobile.native at 4/4/2020, 2:15:47 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."Rating" (
    "id" INTEGER NOT NULL  PRIMARY KEY AUTOINCREMENT,
    "rate" INTEGER NOT NULL  
) 

CREATE TABLE "quaint"."_BusinessToRating" (
    "A" INTEGER NOT NULL  ,
    "B" INTEGER NOT NULL  ,FOREIGN KEY ("A") REFERENCES "Business"("id") ON DELETE CASCADE ON UPDATE CASCADE,
FOREIGN KEY ("B") REFERENCES "Rating"("id") ON DELETE CASCADE ON UPDATE CASCADE
) 

CREATE UNIQUE INDEX "quaint"."_BusinessToRating_AB_unique" ON "_BusinessToRating"("A","B")

CREATE  INDEX "quaint"."_BusinessToRating_B_index" ON "_BusinessToRating"("B")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200404134026-delete-unique-voucher-name..20200404141547-add-rating-table
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "file:./dev.db"
 }
 model Voucher {
   id Int @default(autoincrement()) @id
@@ -31,8 +31,14 @@
   name String
   businesses Business[]
 }
+model Rating {
+  id Int @default(autoincrement()) @id
+  rate Int
+  businesses Business[] @relation(references: [id])
+}
+
 model Business {
   id Int @default(autoincrement()) @id
   name String
   city String
@@ -45,7 +51,8 @@
   type String
   vouchers Voucher[]
   categoryId Int?
   category Category? @relation(fields: [categoryId], references: [id])
+  rates Rating[] @relation(references: [id])
 }
```


